(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(17),r=t.n(c),a=t(8),o=t(3),u=t(2),i=t(4),s=t.n(i),l="/api/persons",d={getAllPersons:function(){return s.a.get(l).then((function(e){return e.data}))},createPerson:function(e){return s.a.post(l,e).then((function(e){return e.data}))},updatePerson:function(e,n){return s.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},deletePerson:function(e){return s.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))}},j=t(0),h=function(e){var n=e.persons.filter((function(n){return n.name.toLocaleLowerCase().includes(e.newFilter.toLocaleLowerCase())}));return Object(j.jsx)("div",{children:n.map((function(n){return Object(j.jsx)(f,{person:n,handlePersonDelete:function(){return e.handlePersonDelete(n.id)}},n.id)}))})},f=function(e){var n=e.person,t=e.handlePersonDelete;return Object(j.jsxs)("div",{children:[n.name," ",n.number," ",Object(j.jsx)("button",{onClick:t,children:"delete"})]})},b=function(e){return Object(j.jsxs)("div",{children:["filter shown with ",Object(j.jsx)("input",{value:e.newFilter,onChange:e.handleFilterChange})]})},m=function(e){return Object(j.jsx)("div",{children:Object(j.jsxs)("form",{onSubmit:e.addPerson,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{value:e.newName,onChange:e.handleNameChange})," "]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})," "]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})})},O=function(e){var n=e.message;return null===n?null:Object(j.jsx)("div",{className:"notification",children:n})},p=function(e){var n=e.message;return null===n?null:Object(j.jsx)("div",{className:"error",children:n})},v=function(){var e=Object(u.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],r=Object(u.useState)(""),i=Object(o.a)(r,2),s=i[0],l=i[1],f=Object(u.useState)(""),v=Object(o.a)(f,2),w=v[0],x=v[1],g=Object(u.useState)(""),P=Object(o.a)(g,2),C=P[0],N=P[1],k=Object(u.useState)(null),D=Object(o.a)(k,2),S=D[0],F=D[1],y=Object(u.useState)(null),L=Object(o.a)(y,2),A=L[0],E=L[1];Object(u.useEffect)((function(){d.getAllPersons().then((function(e){c(e)}))}),[]);var R=function(e){var n=Object(a.a)(Object(a.a)({},e),{},{number:w});d.updatePerson(e.id,n).then((function(e){c(t.map((function(t){return t.id!==n.id?t:e}))),l(""),x("")})).then((function(e){return J("'".concat(n.name,"' was edited"))})).catch((function(e){T("Editing '".concat(n.name,"' failed. Reason: ").concat(e.response.data.error))}))},J=function(e){F(null),F(e),setTimeout((function(){F(null)}),4e3)},T=function(e){E(null),E(e),setTimeout((function(){E(null)}),4e3)};return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(O,{message:S}),Object(j.jsx)(p,{message:A}),Object(j.jsx)(b,{newFilter:C,handleFilterChange:function(e){N(e.target.value)}}),Object(j.jsx)("h2",{children:"add a new"}),Object(j.jsx)(m,{newName:s,newNumber:w,addPerson:function(e){if(e.preventDefault(),t.some((function(e){return e.name===s})))if(window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name===s}));R(n)}else console.log("Phonebook person edit was cancelled");else{var r={name:s,number:w};d.createPerson(r).then((function(e){c(t.concat(e)),l(""),x("")})).then((function(e){return J("'".concat(r.name,"' was added"))})).catch((function(e){T("Adding '".concat(r.name,"' failed. Reason: ").concat(e.response.data.error))}))}},handleNameChange:function(e){l(e.target.value)},handleNumberChange:function(e){x(e.target.value)}}),Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)(h,{persons:t,newFilter:C,handlePersonDelete:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete person ".concat(n.name,"?"))?d.deletePerson(e).then((function(n){return c(t.filter((function(n){return n.id!==e})))})).then((function(e){return J("'".concat(n.name,"' was deleted"))})).catch((function(e){T("Deleting '".concat(n.name,"' failed. Reason: already removed from the server"))})):console.log("Phonebook person delete was cancelled")}})]})};t(41);r.a.render(Object(j.jsx)(v,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.f4b4d02f.chunk.js.map