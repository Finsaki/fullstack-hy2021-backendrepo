(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(17),r=t.n(c),a=t(8),o=t(3),u=t(2),i=t(4),l=t.n(i),s="http://localhost:3001/api/persons",d={getAllPersons:function(){return l.a.get(s).then((function(e){return e.data}))},createPerson:function(e){return l.a.post(s,e).then((function(e){return e.data}))},updatePerson:function(e,n){return l.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},deletePerson:function(e){return l.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))}},h=t(0),j=function(e){var n=e.persons.filter((function(n){return n.name.toLocaleLowerCase().includes(e.newFilter.toLocaleLowerCase())}));return Object(h.jsx)("div",{children:n.map((function(n){return Object(h.jsx)(f,{person:n,handlePersonDelete:function(){return e.handlePersonDelete(n.id)}},n.id)}))})},f=function(e){var n=e.person,t=e.handlePersonDelete;return Object(h.jsxs)("div",{children:[n.name," ",n.number," ",Object(h.jsx)("button",{onClick:t,children:"delete"})]})},b=function(e){return Object(h.jsxs)("div",{children:["filter shown with ",Object(h.jsx)("input",{value:e.newFilter,onChange:e.handleFilterChange})]})},m=function(e){return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{onSubmit:e.addPerson,children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{value:e.newName,onChange:e.handleNameChange})," "]}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})," "]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})})},O=function(e){var n=e.message;return null===n?null:Object(h.jsx)("div",{className:"notification",children:n})},v=function(e){var n=e.message;return null===n?null:Object(h.jsx)("div",{className:"error",children:n})},p=function(){var e=Object(u.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],r=Object(u.useState)(""),i=Object(o.a)(r,2),l=i[0],s=i[1],f=Object(u.useState)(""),p=Object(o.a)(f,2),w=p[0],x=p[1],g=Object(u.useState)(""),P=Object(o.a)(g,2),C=P[0],N=P[1],k=Object(u.useState)(null),D=Object(o.a)(k,2),S=D[0],F=D[1],y=Object(u.useState)(null),L=Object(o.a)(y,2),A=L[0],E=L[1];Object(u.useEffect)((function(){d.getAllPersons().then((function(e){c(e)}))}),[]);var R=function(e){var n=Object(a.a)(Object(a.a)({},e),{},{number:w});d.updatePerson(e.id,n).then((function(e){c(t.map((function(t){return t.id!==n.id?t:e}))),s(""),x("")})).then((function(e){return J("'".concat(n.name,"' was edited"))})).catch((function(e){T("Editing '".concat(n.name,"' failed. Reason: already removed from the server"))}))},J=function(e){F(null),F(e),setTimeout((function(){F(null)}),4e3)},T=function(e){E(null),E(e),setTimeout((function(){E(null)}),4e3)};return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(O,{message:S}),Object(h.jsx)(v,{message:A}),Object(h.jsx)(b,{newFilter:C,handleFilterChange:function(e){N(e.target.value)}}),Object(h.jsx)("h2",{children:"add a new"}),Object(h.jsx)(m,{newName:l,newNumber:w,addPerson:function(e){if(e.preventDefault(),t.some((function(e){return e.name===l})))if(window.confirm("".concat(l," is already added to phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name===l}));R(n)}else console.log("Phonebook person edit was cancelled");else{var r={name:l,number:w};d.createPerson(r).then((function(e){c(t.concat(e)),s(""),x("")})).then((function(e){return J("'".concat(r.name,"' was added"))})).catch((function(e){T("Adding '".concat(r.name,"' failed. Reason: Unknown"))}))}},handleNameChange:function(e){s(e.target.value)},handleNumberChange:function(e){x(e.target.value)}}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(j,{persons:t,newFilter:C,handlePersonDelete:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete person ".concat(n.name,"?"))?d.deletePerson(e).then((function(n){return c(t.filter((function(n){return n.id!==e})))})).then((function(e){return J("'".concat(n.name,"' was deleted"))})).catch((function(e){T("Deleting '".concat(n.name,"' failed. Reason: already removed from the server"))})):console.log("Phonebook person delete was cancelled")}})]})};t(41);r.a.render(Object(h.jsx)(p,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.98178269.chunk.js.map